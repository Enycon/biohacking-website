document.addEventListener('DOMContentLoaded',()=>{const t=document.getElementById('pomodoro-time'),e=document.getElementById('pomodoro-start'),o=document.getElementById('pomodoro-pause'),n=document.getElementById('pomodoro-reset'),i=document.getElementById('pomodoro-status');let l,d=1500,a=!1,s=!0;function c(){const e=Math.floor(d/60),o=d%60;t&&(t.textContent=`${e.toString().padStart(2,'0')}:${o.toString().padStart(2,'0')}`)}function m(){a||(a=!0,i&&(i.textContent=s?'Arbeitszeit läuft...':'Pause läuft...'),l=setInterval(()=>{d--,c(),d<=0&&(clearInterval(l),a=!1,s=!s,d=s?1500:300,i&&(i.textContent=s?'Zeit für Arbeit!':'Zeit für eine Pause!'),c())},1e3))}function u(){a&&(a=!1,clearInterval(l),i&&(i.textContent='Pausiert'))}function p(){a=!1,clearInterval(l),s=!0,d=1500,c(),i&&(i.textContent='Bereit zum Starten')}e&&e.addEventListener('click',m),o&&o.addEventListener('click',u),n&&n.addEventListener('click',p),c(),i&&(i.textContent='Bereit zum Starten');const g=document.getElementById('wake-up-time'),r=document.getElementById('calculate-sleep'),h=document.getElementById('sleep-times-result');function f(t){if(!t)return[];const[e,o]=t.split(':').map(Number),n=new Date;n.setHours(e,o,0,0);const i=[6,5,4],l=15,d=[];return i.forEach(t=>{const e=t*90,o=new Date(n.getTime());o.setMinutes(o.getMinutes()-e-l);const i=o.getHours().toString().padStart(2,'0'),a=o.getMinutes().toString().padStart(2,'0');d.push(`${i}:${a}`)}),d}function b(){if(!g||!h)return;const t=g.value,e=f(t);e.length>0?h.innerHTML=`Um erfrischt aufzuwachen, solltest du versuchen, um eine dieser Zeiten ins Bett zu gehen: <strong>${e.join(' oder ')}</strong>. (Basierend auf 90-Minuten-Schlafzyklen und ca. 15 Min. Einschlafzeit).`:h.innerHTML='Bitte gib eine gültige Aufstehzeit ein (HH:MM).'}r&&r.addEventListener('click',b)});
