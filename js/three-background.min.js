import*as THREE from'https://cdn.skypack.dev/three@0.132.2';let scene,camera,renderer,particles,particleMaterial,mouseX=0,mouseY=0;const windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e3),camera.position.z=1e3,renderer=new THREE.WebGLRenderer({canvas:document.getElementById('webgl-canvas'),alpha:!0,antialias:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));const e=5e3,t=new THREE.BufferGeometry,i=new Float32Array(e*3);for(let t=0;t<e*3;t++)i[t]=(Math.random()-.5)*2e3;t.setAttribute('position',new THREE.BufferAttribute(i,3)),particleMaterial=new THREE.PointsMaterial({color:5046192,size:3,map:createCircleTexture(),blending:THREE.AdditiveBlending,transparent:!0,depthWrite:!1}),particles=new THREE.Points(t,particleMaterial),scene.add(particles),document.addEventListener('mousemove',onDocumentMouseMove,!1),window.addEventListener('resize',onWindowResize,!1),animate()}function createCircleTexture(){const e=document.createElement('canvas');e.width=64,e.height=64;const t=e.getContext('2d');return t.beginPath(),t.arc(32,32,30,0,Math.PI*2),t.fillStyle='#ffffff',t.fill(),new THREE.CanvasTexture(e)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}function onDocumentMouseMove(e){mouseX=(e.clientX-windowHalfX)/2,mouseY=(e.clientY-windowHalfY)/2}function animate(){requestAnimationFrame(animate);const e=Date.now()*5e-5;camera.position.x+=(mouseX-camera.position.x)*.03,camera.position.y+=(-mouseY-camera.position.y)*.03,camera.lookAt(scene.position),particles.rotation.x=e*.2,particles.rotation.y=e*.4,renderer.render(scene,camera)}'loading'===document.readyState?document.addEventListener('DOMContentLoaded',init):init();
